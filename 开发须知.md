# å¼€å‘é¡»çŸ¥

## ğŸ“‹ é¡¹ç›®æŠ€æœ¯æ ˆ

æœ¬é¡¹ç›®åŸºäº Next.js 16.0.5 çš„é»˜è®¤é…ç½®ï¼ŒåŒ…å«ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š

- **æ¡†æ¶**: Next.js 16.0.5 (App Router)
- **è¯­è¨€**: TypeScript 5.x
- **æ ·å¼**: Tailwind CSS 4.x
- **ä»£ç æ£€æŸ¥**: ESLint 9.x (Next.js é…ç½®)
- **æ„å»ºå·¥å…·**: Turbopack (Next.js é»˜è®¤)
- **åŒ…ç®¡ç†å™¨**: pnpm
- **React ç‰ˆæœ¬**: 19.2.0

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

### æ ¹ç›®å½•ç»“æ„

```
book-dis/
â”œâ”€â”€ src/                    # æºä»£ç ç›®å½•
â”‚   â””â”€â”€ app/                # App Router ç›®å½•ï¼ˆæ ¸å¿ƒè·¯ç”±ç›®å½•ï¼‰
â”‚       â”œâ”€â”€ layout.tsx      # æ ¹å¸ƒå±€ç»„ä»¶
â”‚       â”œâ”€â”€ page.tsx        # é¦–é¡µç»„ä»¶
â”‚       â”œâ”€â”€ globals.css     # å…¨å±€æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ favicon.ico     # ç½‘ç«™å›¾æ ‡
â”œâ”€â”€ public/                 # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ *.svg              # é™æ€å›¾ç‰‡èµ„æº
â”‚   â””â”€â”€ ...                # å…¶ä»–é™æ€æ–‡ä»¶
â”œâ”€â”€ node_modules/          # ä¾èµ–åŒ…ç›®å½•
â”œâ”€â”€ .next/                 # Next.js æ„å»ºè¾“å‡ºç›®å½•ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼Œå·²å¿½ç•¥ï¼‰
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ pnpm-lock.yaml         # pnpm é”å®šæ–‡ä»¶
â”œâ”€â”€ tsconfig.json          # TypeScript é…ç½®
â”œâ”€â”€ next.config.ts         # Next.js é…ç½®
â”œâ”€â”€ eslint.config.mjs      # ESLint é…ç½®
â”œâ”€â”€ postcss.config.mjs     # PostCSS é…ç½®ï¼ˆTailwindï¼‰
â””â”€â”€ README.md              # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

### æ¨èçš„æ‰©å±•ç›®å½•ç»“æ„

éšç€é¡¹ç›®å‘å±•ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹ç»“æ„ç»„ç»‡ä»£ç ï¼š

```
src/
â”œâ”€â”€ app/                    # App Router è·¯ç”±ç›®å½•
â”‚   â”œâ”€â”€ (auth)/            # è·¯ç”±ç»„ï¼ˆä¸æ”¹å˜ URLï¼‰
â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ register/
â”‚   â”‚       â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ dashboard/         # åŠ¨æ€è·¯ç”±ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ [id]/          # åŠ¨æ€è·¯ç”±å‚æ•°
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”œâ”€â”€ api/               # API è·¯ç”±
â”‚   â”‚   â””â”€â”€ users/
â”‚   â”‚       â””â”€â”€ route.ts
â”‚   â”œâ”€â”€ layout.tsx         # æ ¹å¸ƒå±€
â”‚   â”œâ”€â”€ page.tsx           # é¦–é¡µ
â”‚   â”œâ”€â”€ loading.tsx        # å…¨å±€åŠ è½½çŠ¶æ€
â”‚   â”œâ”€â”€ error.tsx          # å…¨å±€é”™è¯¯è¾¹ç•Œ
â”‚   â”œâ”€â”€ not-found.tsx      # 404 é¡µé¢
â”‚   â””â”€â”€ globals.css        # å…¨å±€æ ·å¼
â”œâ”€â”€ components/            # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ ui/                # åŸºç¡€ UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ layout/            # å¸ƒå±€ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx
â”‚   â”‚   â”œâ”€â”€ Footer.tsx
â”‚   â”‚   â””â”€â”€ Sidebar.tsx
â”‚   â””â”€â”€ features/          # åŠŸèƒ½ç»„ä»¶
â”‚       â””â”€â”€ ...
â”œâ”€â”€ lib/                   # å·¥å…·å‡½æ•°å’Œåº“
â”‚   â”œâ”€â”€ utils.ts           # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ api.ts             # API å®¢æˆ·ç«¯
â”‚   â””â”€â”€ constants.ts       # å¸¸é‡å®šä¹‰
â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰ React Hooks
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â””â”€â”€ useLocalStorage.ts
â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ index.ts
â”‚   â””â”€â”€ api.ts
â”œâ”€â”€ styles/                # æ ·å¼æ–‡ä»¶ï¼ˆå¦‚éœ€è¦ï¼‰
â”‚   â””â”€â”€ ...
â””â”€â”€ middleware.ts          # Next.js ä¸­é—´ä»¶ï¼ˆå¯é€‰ï¼‰
```

## ğŸ¯ App Router å¼€å‘åŸåˆ™

### 1. æ–‡ä»¶ç³»ç»Ÿè·¯ç”±

Next.js App Router ä½¿ç”¨**æ–‡ä»¶ç³»ç»Ÿè·¯ç”±**ï¼Œç›®å½•ç»“æ„ç›´æ¥æ˜ å°„åˆ° URL è·¯å¾„ï¼š

- `src/app/page.tsx` â†’ `/` (é¦–é¡µ)
- `src/app/about/page.tsx` â†’ `/about`
- `src/app/products/[id]/page.tsx` â†’ `/products/:id` (åŠ¨æ€è·¯ç”±)
- `src/app/blog/[...slug]/page.tsx` â†’ `/blog/*` (æ•è·æ‰€æœ‰è·¯ç”±)

### 2. ç‰¹æ®Šæ–‡ä»¶çº¦å®š

App Router ä½¿ç”¨ç‰¹æ®Šçš„æ–‡ä»¶å‘½åçº¦å®šï¼š

| æ–‡ä»¶å | ç”¨é€” | è¯´æ˜ |
|--------|------|------|
| `layout.tsx` | å¸ƒå±€ç»„ä»¶ | å…±äº«çš„å¸ƒå±€ï¼Œå¯åµŒå¥— |
| `page.tsx` | é¡µé¢ç»„ä»¶ | è·¯ç”±çš„ UIï¼Œå¿…é¡»å¯¼å‡º default |
| `loading.tsx` | åŠ è½½çŠ¶æ€ | æ˜¾ç¤ºåŠ è½½ä¸­çš„ UI |
| `error.tsx` | é”™è¯¯è¾¹ç•Œ | å¤„ç†é”™è¯¯çŠ¶æ€ |
| `not-found.tsx` | 404 é¡µé¢ | æ˜¾ç¤ºæœªæ‰¾åˆ°é¡µé¢ |
| `route.ts` | API è·¯ç”± | åˆ›å»º API ç«¯ç‚¹ |
| `template.tsx` | æ¨¡æ¿ç»„ä»¶ | ç±»ä¼¼ layoutï¼Œä½†ä¼šé‡æ–°æŒ‚è½½ |
| `default.tsx` | å¹¶è¡Œè·¯ç”±é»˜è®¤ | å¹¶è¡Œè·¯ç”±çš„é»˜è®¤è§†å›¾ |

### 3. è·¯ç”±ç»„ (Route Groups)

ä½¿ç”¨æ‹¬å· `()` åˆ›å»ºè·¯ç”±ç»„ï¼Œ**ä¸ä¼šå½±å“ URL è·¯å¾„**ï¼š

```
app/
â”œâ”€â”€ (marketing)/
â”‚   â”œâ”€â”€ about/
â”‚   â””â”€â”€ contact/
â””â”€â”€ (shop)/
    â”œâ”€â”€ products/
    â””â”€â”€ cart/
```

URL ä»ç„¶æ˜¯ `/about`, `/contact`, `/products`, `/cart`

### 4. å¹¶è¡Œè·¯ç”± (Parallel Routes)

ä½¿ç”¨ `@folder` è¯­æ³•åˆ›å»ºå¹¶è¡Œè·¯ç”±ï¼š

```
app/
â”œâ”€â”€ @analytics/
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ @team/
â”‚   â””â”€â”€ page.tsx
â””â”€â”€ dashboard/
    â””â”€â”€ page.tsx
```

### 5. æ‹¦æˆªè·¯ç”± (Intercepting Routes)

ä½¿ç”¨ `(.)` æˆ– `(..)` è¯­æ³•æ‹¦æˆªè·¯ç”±ï¼š

- `(.)` - åŒçº§åˆ«æ‹¦æˆª
- `(..)` - ä¸Šä¸€çº§æ‹¦æˆª
- `(..)(..)` - ä¸Šä¸¤çº§æ‹¦æˆª
- `(...)` - ä»æ ¹ç›®å½•æ‹¦æˆª

## ğŸ“ æ–‡ä»¶å‘½åè§„èŒƒ

### ç»„ä»¶æ–‡ä»¶

- **React ç»„ä»¶**: ä½¿ç”¨ `PascalCase`ï¼Œå¦‚ `UserProfile.tsx`
- **é¡µé¢ç»„ä»¶**: å¿…é¡»å‘½åä¸º `page.tsx` (å°å†™)
- **å¸ƒå±€ç»„ä»¶**: å¿…é¡»å‘½åä¸º `layout.tsx` (å°å†™)
- **å·¥å…·æ–‡ä»¶**: ä½¿ç”¨ `camelCase`ï¼Œå¦‚ `formatDate.ts`

### ç›®å½•å‘½å

- **è·¯ç”±ç›®å½•**: ä½¿ç”¨ `kebab-case`ï¼Œå¦‚ `user-profile/`
- **ç»„ä»¶ç›®å½•**: ä½¿ç”¨ `kebab-case`ï¼Œå¦‚ `user-profile/`
- **å·¥å…·ç›®å½•**: ä½¿ç”¨ `kebab-case`ï¼Œå¦‚ `api-client/`

## ğŸ”— å¯¼å…¥è·¯å¾„è§„åˆ™

### ä½¿ç”¨è·¯å¾„åˆ«å `@/*`

é¡¹ç›®é…ç½®äº†è·¯å¾„åˆ«å `@/*`ï¼ŒæŒ‡å‘ `./src/*`ï¼Œ**å¿…é¡»ä½¿ç”¨åˆ«åå¯¼å…¥**ï¼š

```typescript
// âœ… æ­£ç¡® - ä½¿ç”¨è·¯å¾„åˆ«å
import { Button } from '@/components/ui/Button';
import { formatDate } from '@/lib/utils';
import { useAuth } from '@/hooks/useAuth';

// âŒ é”™è¯¯ - ä½¿ç”¨ç›¸å¯¹è·¯å¾„
import { Button } from '../../components/ui/Button';
import { formatDate } from '../lib/utils';
```

### å¯¼å…¥é¡ºåºå»ºè®®

```typescript
// 1. React å’Œ Next.js æ ¸å¿ƒ
import { useState } from 'react';
import Image from 'next/image';
import Link from 'next/link';

// 2. ç¬¬ä¸‰æ–¹åº“
import { clsx } from 'clsx';
import { z } from 'zod';

// 3. é¡¹ç›®å†…éƒ¨ - ç»„ä»¶
import { Button } from '@/components/ui/Button';
import { Header } from '@/components/layout/Header';

// 4. é¡¹ç›®å†…éƒ¨ - å·¥å…·å‡½æ•°
import { formatDate } from '@/lib/utils';
import { api } from '@/lib/api';

// 5. é¡¹ç›®å†…éƒ¨ - ç±»å‹
import type { User } from '@/types';

// 6. æ ·å¼æ–‡ä»¶ï¼ˆæœ€åï¼‰
import './styles.css';
```

## ğŸ¨ Tailwind CSS ä½¿ç”¨è§„èŒƒ

### ç±»åç»„ç»‡

ä½¿ç”¨ `clsx` æˆ– `cn` å·¥å…·å‡½æ•°ç®¡ç†æ¡ä»¶ç±»åï¼š

```typescript
import { clsx } from 'clsx';

// âœ… æ¨è
<div className={clsx(
  'base-classes',
  isActive && 'active-classes',
  variant === 'primary' && 'primary-classes'
)}>

// æˆ–ä½¿ç”¨ cn (é€šå¸¸æ¥è‡ª utils)
import { cn } from '@/lib/utils';
<div className={cn('base', isActive && 'active')}>
```

### å“åº”å¼è®¾è®¡

éµå¾ªç§»åŠ¨ä¼˜å…ˆåŸåˆ™ï¼š

```typescript
// âœ… æ­£ç¡® - ç§»åŠ¨ä¼˜å…ˆ
<div className="text-sm md:text-base lg:text-lg">

// âŒ é”™è¯¯
<div className="text-lg lg:text-sm">
```

### æš—è‰²æ¨¡å¼

ä½¿ç”¨ `dark:` å‰ç¼€ï¼š

```typescript
<div className="bg-white dark:bg-black text-black dark:text-white">
```

## ğŸ”§ TypeScript å¼€å‘è§„èŒƒ

### ç±»å‹å®šä¹‰

- **ç»„ä»¶ Props**: ä½¿ç”¨ `interface` æˆ– `type`
- **API å“åº”**: å®šä¹‰æ˜ç¡®çš„ç±»å‹
- **é¿å…ä½¿ç”¨ `any`**: ä½¿ç”¨ `unknown` æˆ–å…·ä½“ç±»å‹

```typescript
// âœ… æ¨è
interface UserProfileProps {
  userId: string;
  showEmail?: boolean;
}

export default function UserProfile({ userId, showEmail = false }: UserProfileProps) {
  // ...
}

// âŒ é¿å…
export default function UserProfile(props: any) {
  // ...
}
```

### å¼‚æ­¥ç»„ä»¶

ä½¿ç”¨ `async/await` å¤„ç†æœåŠ¡ç«¯ç»„ä»¶ï¼š

```typescript
// âœ… æœåŠ¡ç«¯ç»„ä»¶å¯ä»¥å¼‚æ­¥
export default async function Page() {
  const data = await fetchData();
  return <div>{data}</div>;
}
```

## ğŸš€ å¼€å‘æœ€ä½³å®è·µ

### 1. ç»„ä»¶è®¾è®¡åŸåˆ™

- **å•ä¸€èŒè´£**: æ¯ä¸ªç»„ä»¶åªåšä¸€ä»¶äº‹
- **å¯å¤ç”¨æ€§**: æå–é€šç”¨é€»è¾‘ä¸ºè‡ªå®šä¹‰ Hooks
- **æœåŠ¡ç«¯ä¼˜å…ˆ**: ä¼˜å…ˆä½¿ç”¨æœåŠ¡ç«¯ç»„ä»¶ï¼Œéœ€è¦äº¤äº’æ—¶å†ä½¿ç”¨å®¢æˆ·ç«¯ç»„ä»¶

### 2. å®¢æˆ·ç«¯ç»„ä»¶æ ‡è®°

éœ€è¦å®¢æˆ·ç«¯äº¤äº’çš„ç»„ä»¶å¿…é¡»æ·»åŠ  `'use client'` æŒ‡ä»¤ï¼š

```typescript
'use client';

import { useState } from 'react';

export default function InteractiveComponent() {
  const [count, setCount] = useState(0);
  // ...
}
```

### 3. æ•°æ®è·å–

- **æœåŠ¡ç«¯ç»„ä»¶**: ç›´æ¥ä½¿ç”¨ `async/await` å’Œ `fetch`
- **å®¢æˆ·ç«¯ç»„ä»¶**: ä½¿ç”¨ `useEffect` æˆ– React Query/SWR
- **API è·¯ç”±**: åœ¨ `app/api/` ç›®å½•ä¸‹åˆ›å»º `route.ts`

### 4. æ€§èƒ½ä¼˜åŒ–

- **å›¾ç‰‡ä¼˜åŒ–**: ä½¿ç”¨ `next/image` ç»„ä»¶
- **å­—ä½“ä¼˜åŒ–**: ä½¿ç”¨ `next/font` åŠ è½½å­—ä½“
- **ä»£ç åˆ†å‰²**: ä½¿ç”¨åŠ¨æ€å¯¼å…¥ `dynamic()`
- **å…ƒæ•°æ®**: ä½¿ç”¨ `metadata` å¯¹è±¡ä¼˜åŒ– SEO

```typescript
// åŠ¨æ€å¯¼å…¥
import dynamic from 'next/dynamic';

const HeavyComponent = dynamic(() => import('@/components/Heavy'), {
  loading: () => <p>Loading...</p>,
  ssr: false, // ç¦ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆå¦‚éœ€è¦ï¼‰
});
```

### 4.1 åŠ¨æ€å¯¼å…¥ (Dynamic Import) æŒ‡å—

#### ä»€ä¹ˆç»„ä»¶åº”è¯¥åŠ¨æ€å¯¼å…¥ï¼Ÿ

**âœ… åº”è¯¥åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ï¼š**

1. **å¤§å‹ç¬¬ä¸‰æ–¹åº“ç»„ä»¶**
   ```typescript
   // å›¾è¡¨åº“ã€ç¼–è¾‘å™¨ç­‰å¤§å‹ä¾èµ–
   const Chart = dynamic(() => import('@/components/Chart'), {
     loading: () => <div>åŠ è½½å›¾è¡¨ä¸­...</div>,
   });
   
   const Editor = dynamic(() => import('@/components/Editor'), {
     ssr: false, // ç¼–è¾‘å™¨é€šå¸¸éœ€è¦æµè§ˆå™¨ API
   });
   ```

2. **éé¦–å±å…³é”®ç»„ä»¶**
   ```typescript
   // æ¨¡æ€æ¡†ã€æŠ½å±‰ã€ä¾§è¾¹æ ç­‰äº¤äº’ç»„ä»¶
   const Modal = dynamic(() => import('@/components/Modal'));
   const Sidebar = dynamic(() => import('@/components/Sidebar'));
   ```

3. **æ¡ä»¶æ¸²æŸ“çš„é‡å‹ç»„ä»¶**
   ```typescript
   // åªåœ¨ç‰¹å®šæ¡ä»¶ä¸‹æ‰æ˜¾ç¤ºçš„ç»„ä»¶
   const AdminPanel = dynamic(() => import('@/components/AdminPanel'));
   
   {isAdmin && <AdminPanel />}
   ```

4. **åŒ…å«å¤§é‡æ•°æ®çš„ç»„ä»¶**
   ```typescript
   // æ•°æ®è¡¨æ ¼ã€åˆ—è¡¨ç­‰
   const DataTable = dynamic(() => import('@/components/DataTable'), {
     loading: () => <TableSkeleton />,
   });
   ```

5. **ä½¿ç”¨æµè§ˆå™¨ä¸“ç”¨ API çš„ç»„ä»¶**
   ```typescript
   // åœ°å›¾ã€è§†é¢‘æ’­æ”¾å™¨ç­‰
   const Map = dynamic(() => import('@/components/Map'), {
     ssr: false, // åœ°å›¾éœ€è¦ window å¯¹è±¡
   });
   ```

**âŒ ä¸åº”è¯¥åŠ¨æ€å¯¼å…¥çš„ç»„ä»¶ï¼š**

1. **é¦–å±å…³é”®å†…å®¹** - å½±å“ SEO å’Œé¦–å±åŠ è½½
2. **å°å‹è½»é‡ç»„ä»¶** - åŠ¨æ€å¯¼å…¥çš„å¼€é”€å¤§äºæ”¶ç›Š
3. **å¸ƒå±€ç»„ä»¶** - å½±å“æ•´ä½“é¡µé¢ç»“æ„
4. **é¢‘ç¹ä½¿ç”¨çš„ç»„ä»¶** - ä¼šå¢åŠ åŠ è½½å»¶è¿Ÿ

#### åŠ¨æ€å¯¼å…¥çš„é…ç½®é€‰é¡¹

```typescript
import dynamic from 'next/dynamic';

const Component = dynamic(
  () => import('@/components/Component'),
  {
    // åŠ è½½ä¸­æ˜¾ç¤ºçš„ç»„ä»¶
    loading: () => <LoadingSpinner />,
    
    // ç¦ç”¨æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆé»˜è®¤ trueï¼‰
    ssr: false,
    
    // è‡ªå®šä¹‰åŠ è½½å‡½æ•°ï¼ˆå¯é€‰ï¼‰
    // loading: ({ error, isLoading, pastDelay }) => {
    //   if (error) return <Error />;
    //   if (isLoading && pastDelay) return <Loading />;
    //   return null;
    // }
  }
);
```

### 4.2 ç¦ç”¨ SSR (ssr: false) çš„åŸåˆ™

#### ä½•æ—¶åº”è¯¥ç¦ç”¨ SSRï¼Ÿ

**âœ… å¿…é¡»ç¦ç”¨ SSR çš„æƒ…å†µï¼š**

1. **ä¾èµ–æµè§ˆå™¨å…¨å±€å¯¹è±¡**
   ```typescript
   // ä½¿ç”¨ windowã€documentã€localStorage ç­‰
   const ClientOnlyComponent = dynamic(
     () => import('@/components/ClientOnly'),
     { ssr: false }
   );
   
   // ç»„ä»¶å†…éƒ¨ä½¿ç”¨
   'use client';
   export default function ClientOnly() {
     useEffect(() => {
       // è®¿é—® window å¯¹è±¡
       window.scrollTo(0, 0);
     }, []);
   }
   ```

2. **ç¬¬ä¸‰æ–¹åº“ä¸æ”¯æŒ SSR**
   ```typescript
   // æŸäº›åº“ï¼ˆå¦‚æŸäº›å›¾è¡¨åº“ã€ç¼–è¾‘å™¨ï¼‰ä¸æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“
   const Chart = dynamic(
     () => import('@/components/Chart'),
     { ssr: false }
   );
   ```

3. **éœ€è¦è®¿é—®æµè§ˆå™¨ API**
   ```typescript
   // åœ°ç†ä½ç½®ã€åª’ä½“è®¾å¤‡ã€WebGL ç­‰
   const MapComponent = dynamic(
     () => import('@/components/Map'),
     { ssr: false }
   );
   ```

4. **å®¢æˆ·ç«¯çŠ¶æ€ç®¡ç†åº“**
   ```typescript
   // æŸäº›çŠ¶æ€ç®¡ç†åº“ï¼ˆå¦‚æŸäº›åŠ¨ç”»åº“ï¼‰éœ€è¦åœ¨å®¢æˆ·ç«¯åˆå§‹åŒ–
   const AnimatedComponent = dynamic(
     () => import('@/components/Animated'),
     { ssr: false }
   );
   ```

5. **é¿å…æ°´åˆä¸åŒ¹é… (Hydration Mismatch)**
   ```typescript
   // å½“æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ¸²æŸ“ç»“æœä¸åŒæ—¶
   const DateDisplay = dynamic(
     () => import('@/components/DateDisplay'),
     { ssr: false } // é¿å…æ—¶åŒºå·®å¼‚å¯¼è‡´çš„ä¸åŒ¹é…
   );
   ```

**âŒ ä¸åº”è¯¥ç¦ç”¨ SSR çš„æƒ…å†µï¼š**

1. **SEO å…³é”®å†…å®¹** - æœç´¢å¼•æ“æ— æ³•ç´¢å¼•
2. **é¦–å±å†…å®¹** - å½±å“é¦–å±åŠ è½½æ€§èƒ½
3. **çº¯å±•ç¤ºç»„ä»¶** - æ²¡æœ‰æµè§ˆå™¨ä¾èµ–
4. **å¯ä»¥å®‰å…¨åœ¨æœåŠ¡ç«¯æ¸²æŸ“çš„ç»„ä»¶** - ä¿æŒ SSR ä¼˜åŠ¿

#### ç¦ç”¨ SSR çš„æœ€ä½³å®è·µ

1. **æä¾›åŠ è½½çŠ¶æ€**
   ```typescript
   const Component = dynamic(
     () => import('@/components/Component'),
     {
       ssr: false,
       loading: () => <ComponentSkeleton />, // æä¾›å ä½ç¬¦
     }
   );
   ```

2. **ä½¿ç”¨ Suspense è¾¹ç•Œ**
   ```typescript
   import { Suspense } from 'react';
   
   <Suspense fallback={<Loading />}>
     <ClientOnlyComponent />
   </Suspense>
   ```

3. **è€ƒè™‘ SEO å½±å“**
   ```typescript
   // å¦‚æœå†…å®¹å¯¹ SEO é‡è¦ï¼Œè€ƒè™‘æœåŠ¡ç«¯æ¸²æŸ“åŸºç¡€å†…å®¹
   // å®¢æˆ·ç«¯å†å¢å¼ºäº¤äº’
   export default function Page() {
     return (
       <>
         {/* SEO å…³é”®å†…å®¹ - æœåŠ¡ç«¯æ¸²æŸ“ */}
         <h1>é¡µé¢æ ‡é¢˜</h1>
         <p>é¡µé¢æè¿°</p>
         
         {/* äº¤äº’ç»„ä»¶ - å®¢æˆ·ç«¯æ¸²æŸ“ */}
         <ClientOnlyInteractive />
       </>
     );
   }
   ```

4. **é¿å…è¿‡åº¦ä½¿ç”¨**
   ```typescript
   // âŒ é”™è¯¯ï¼šè¿‡åº¦ç¦ç”¨ SSR
   const Header = dynamic(() => import('@/components/Header'), { ssr: false });
   const Footer = dynamic(() => import('@/components/Footer'), { ssr: false });
   
   // âœ… æ­£ç¡®ï¼šåªåœ¨å¿…è¦æ—¶ç¦ç”¨
   const InteractiveChart = dynamic(
     () => import('@/components/Chart'),
     { ssr: false }
   );
   ```

#### å¸¸è§åœºæ™¯ç¤ºä¾‹

```typescript
// åœºæ™¯ 1: åœ°å›¾ç»„ä»¶ï¼ˆéœ€è¦ window å¯¹è±¡ï¼‰
const Map = dynamic(() => import('@/components/Map'), {
  ssr: false,
  loading: () => <MapSkeleton />,
});

// åœºæ™¯ 2: ä»£ç ç¼–è¾‘å™¨ï¼ˆå¤§å‹åº“ï¼Œä¸æ”¯æŒ SSRï¼‰
const CodeEditor = dynamic(() => import('@/components/CodeEditor'), {
  ssr: false,
  loading: () => <EditorSkeleton />,
});

// åœºæ™¯ 3: æ¨¡æ€æ¡†ï¼ˆéé¦–å±ï¼Œæ¡ä»¶æ¸²æŸ“ï¼‰
const Modal = dynamic(() => import('@/components/Modal'));

// åœºæ™¯ 4: æ•°æ®è¡¨æ ¼ï¼ˆå¤§å‹ç»„ä»¶ï¼Œå»¶è¿ŸåŠ è½½ï¼‰
const DataTable = dynamic(() => import('@/components/DataTable'), {
  loading: () => <TableSkeleton />,
  // ä¸è®¾ç½® ssr: falseï¼Œå› ä¸ºå¯ä»¥æœåŠ¡ç«¯æ¸²æŸ“
});

// åœºæ™¯ 5: å®¢æˆ·ç«¯ä¸“ç”¨åŠŸèƒ½ï¼ˆlocalStorageï¼‰
const UserPreferences = dynamic(
  () => import('@/components/UserPreferences'),
  { ssr: false }
);
```

#### æ€§èƒ½è€ƒè™‘

- **åŠ¨æ€å¯¼å…¥çš„å¼€é”€**: ä¼šå¢åŠ é¢å¤–çš„ç½‘ç»œè¯·æ±‚å’Œ JavaScript æ‰§è¡Œæ—¶é—´
- **SSR ç¦ç”¨å½±å“**: å¤±å»æœåŠ¡ç«¯æ¸²æŸ“çš„ SEO å’Œé¦–å±æ€§èƒ½ä¼˜åŠ¿
- **æƒè¡¡åŸåˆ™**: åªåœ¨æ”¶ç›Šæ˜æ˜¾å¤§äºæˆæœ¬æ—¶ä½¿ç”¨
- **ç›‘æ§æŒ‡æ ‡**: å…³æ³¨ First Contentful Paint (FCP) å’Œ Largest Contentful Paint (LCP)

### 5. é”™è¯¯å¤„ç†

- ä½¿ç”¨ `error.tsx` å¤„ç†é”™è¯¯è¾¹ç•Œ
- ä½¿ç”¨ `not-found.tsx` å¤„ç† 404
- API è·¯ç”±è¿”å›é€‚å½“çš„ HTTP çŠ¶æ€ç 

### 6. ç¯å¢ƒå˜é‡

ä½¿ç”¨ `.env.local` å­˜å‚¨ç¯å¢ƒå˜é‡ï¼š

```bash
# .env.local
NEXT_PUBLIC_API_URL=http://localhost:3000/api
DATABASE_URL=postgresql://...
```

- `NEXT_PUBLIC_*`: æš´éœ²ç»™å®¢æˆ·ç«¯
- å…¶ä»–å˜é‡: ä»…æœåŠ¡ç«¯å¯ç”¨

## ğŸ“¦ å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘æœåŠ¡å™¨ï¼ˆç«¯å£ 3001ï¼‰
pnpm dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm start

# ä»£ç æ£€æŸ¥
pnpm lint

# ç±»å‹æ£€æŸ¥
pnpm tsc --noEmit
```

## ğŸ” è°ƒè¯•æŠ€å·§

1. **å¼€å‘å·¥å…·**: ä½¿ç”¨ React DevTools å’Œ Next.js DevTools
2. **æ§åˆ¶å°**: æœåŠ¡ç«¯æ—¥å¿—åœ¨ç»ˆç«¯ï¼Œå®¢æˆ·ç«¯æ—¥å¿—åœ¨æµè§ˆå™¨
3. **ç½‘ç»œè¯·æ±‚**: ä½¿ç”¨æµè§ˆå™¨ Network é¢æ¿æ£€æŸ¥ API è¯·æ±‚
4. **æ€§èƒ½åˆ†æ**: ä½¿ç”¨ Next.js å†…ç½®çš„æ€§èƒ½åˆ†æå·¥å…·

## ğŸ“š å‚è€ƒèµ„æº

- [Next.js å®˜æ–¹æ–‡æ¡£](https://nextjs.org/docs)
- [App Router æ–‡æ¡£](https://nextjs.org/docs/app)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/docs)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/docs)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦ä¿®æ”¹ `.next/` ç›®å½•**: è¿™æ˜¯æ„å»ºè¾“å‡ºï¼Œä¼šè¢«è‡ªåŠ¨ç”Ÿæˆ
2. **ä¸è¦æäº¤ `node_modules/`**: å·²åœ¨ `.gitignore` ä¸­
3. **è·¯å¾„åˆ«åå¿…é¡»ä½¿ç”¨ `@/*`**: ä¸è¦ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `../`
4. **å®¢æˆ·ç«¯ç»„ä»¶æ ‡è®°**: ä½¿ç”¨ Hooks æˆ–æµè§ˆå™¨ API æ—¶å¿…é¡»æ·»åŠ  `'use client'`
5. **æ–‡ä»¶å‘½åå¤§å°å†™æ•æ„Ÿ**: `page.tsx` å¿…é¡»å°å†™ï¼Œç»„ä»¶æ–‡ä»¶ä½¿ç”¨ PascalCase

---

**æœ€åæ›´æ–°**: 2025å¹´

